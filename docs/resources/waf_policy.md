---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "netlify_waf_policy Resource - netlify"
subcategory: ""
description: |-
  Netlify Web Application Firewall (WAF) policy. Read more https://docs.netlify.com/security/secure-access-to-sites/web-application-firewall/
---

# netlify_waf_policy (Resource)

Netlify Web Application Firewall (WAF) policy. [Read more](https://docs.netlify.com/security/secure-access-to-sites/web-application-firewall/)

## Example Usage

```terraform
resource "netlify_waf_policy" "example" {
  team_id     = data.netlify_team.team.id
  name        = "Terraform Policy"
  description = "This is a test policy through Terraform"
  rule_sets = [
    {
      managed_id        = "crs-basic",
      passive_mode      = true,
      overall_threshold = 5,
      category_thresholds = {
        "fixation" = 8,
      },
      rule_overrides = {
        "920100" = {
          action = "log_only"
        }
      }
    }
  ]
}

# To use this policy in a site, use the netlify_site_build_settings resource:

resource "netlify_site_build_settings" "example" {
  # other attributes...
  waf_policy_id = netlify_waf_policy.example.id
}

# To dynamically define the rule overrides, you can query netlify_managed_waf_rules to get the rule IDs:

data "netlify_managed_waf_rules" "example" {
  team_id = "6600abcdef1234567890abcd"
}

resource "netlify_waf_policy" "example" {
  team_id     = "66ae34e11a567e9092e3850f"
  name        = "Terraform Policy"
  description = "This is a test policy through Terraform"
  rule_sets = [
    {
      managed_id        = "crs-basic",
      passive_mode      = true,
      overall_threshold = 5,
      rule_overrides = {
        for rule in data.netlify_managed_waf_rules.example.rule_sets["crs-basic"].rules : rule.id => {
          action = "log_only"
        } if rule.category == "rce"
      }
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `description` (String)
- `name` (String)
- `rule_sets` (Attributes List) (see [below for nested schema](#nestedatt--rule_sets))
- `team_id` (String)

### Read-Only

- `id` (String) The ID of this resource.
- `last_updated` (String)

<a id="nestedatt--rule_sets"></a>
### Nested Schema for `rule_sets`

Required:

- `managed_id` (String) The managed ID of the rule set. Currently, only crs-basic is supported.
- `overall_threshold` (Number) Recommended default value is 5
- `passive_mode` (Boolean)

Optional:

- `category_thresholds` (Map of Number) Thresholds for each category, e.g. fixation, injection-generic, injection-java, injection-php, lfi, protocol, rce, reputation-scanner, rfi, sqli, ssrf, xss
- `excluded_patterns` (List of String)
- `rule_overrides` (Attributes Map) (see [below for nested schema](#nestedatt--rule_sets--rule_overrides))

<a id="nestedatt--rule_sets--rule_overrides"></a>
### Nested Schema for `rule_sets.rule_overrides`

Required:

- `action` (String) log_only or none

## Import

Import is supported using the following syntax:

```shell
# Import a WAF policy by its team ID and the policy ID
terraform import netlify_waf_policy.main 6600abcdef1234567890abcd:6600abcdef1234567890abcd
```
